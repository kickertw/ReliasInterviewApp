<h4>{{ currentTest?.name }}</h4>

<mat-accordion multi="true" *ngIf="currentTest">
  <mat-expansion-panel *ngFor="let testQuestion of currentTest.testQuestions">
    <mat-expansion-panel-header>
      <mat-panel-title>
        {{ testQuestion.question.text }}
      </mat-panel-title>
    </mat-expansion-panel-header>
    <mat-form-field style="width:80%">
      <textarea [disabled]="currentTest.finished"
        matInput
        placeholder="Answer"
        [(ngModel)]="testQuestion.answer"
        rows="4"
        (blur)="saveResponse(testQuestion.testQuestionId, testQuestion.answer)"
      ></textarea>
    </mat-form-field>
  </mat-expansion-panel>
</mat-accordion>

<div>
    <button *ngIf="!currentTest.finished"
      class="mr-3"
      mat-raised-button
      color="primary"
      (click)="finishTest()"
    >
      Finish Test
    </button>
</div>
